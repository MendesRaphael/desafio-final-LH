version: 2

sources:
    - name: adventureworks-dw-413814
      schema: sap_adw
      description: conformed data transformations from AdventureWorksDW
      tables:
# original schema sales: 
# contains objects related to customers, sales orders, and sales territories
        - name: countryregioncurrency
          description: >
            lookup table containing the iso standard codes for countries and regions..
          columns:
            - name: countryregioncode
              description: iso standard code for countries and regions.
              tests:
                - not_null
            - name: name
              description: country or region name.
              tests:
                - not_null
            - name: modifieddate
              description: >
                date and time the record was last updated.
              tests:
              - not_null
        
        - name: creditcard
          description: >
            Information about credit cards.
          columns:
            - name: creditcardid
              description: Primary key of the credit card table
              tests:
                - unique
                - not_null
            - name: cardtype
              description: The type of credit card
              tests:
                - not_null
            - name: cardnumber
              description: The credit card number
              tests:
                - not_null
            - name: expmonth
              description: The expiration month of the credit card
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 1
                    max_value: 12
                    inclusive: true
            - name: expyear
              description: The expiration year of the credit card
              tests:
                - not_null
            - name: modifieddate
              description: >
                The date and time the record was last modified
              tests:
                - not_null
        
        - name: currency
          description: >
            Information about currencies.
          columns:
            - name: currencycode
              description: Primary key representing the currency code
              tests:
                - unique
                - not_null
            - name: name
              description: The name of the currency
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null

        - name: currencyrate
          description: >
            Information about currency exchange rates.
          columns:
            - name: currencyrateid
              description: Primary key of the currency rate table
              tests:
                - unique
                - not_null
            - name: currencyratedate
              description: The date of the currency exchange rate
              tests:
                - not_null
            - name: fromcurrencycode
              description: The code of the currency being exchanged from
              tests:
                - not_null
            - name: tocurrencycode
              description: The code of the currency being exchanged to
              tests:
                - not_null
            - name: averagerate
              description: The average exchange rate
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: endofdayrate
              description: The end-of-day exchange rate
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: customer
          description: >
            Information about customers, who may be a person, a store, or a person working for a store.
          columns:
            - name: customerid
              description: Primary key of the customer table
              tests:
                - unique
                - not_null
            - name: personid
              description: Foreign key referencing the person associated with the customer (nullable)
            - name: storeid
              description: >
                Foreign key referencing the store associated with the customer (nullable)
            - name: territoryid
              description: >
                Foreign key referencing the territory associated with the customer (nullable)
            - name: accountnumber
              description: The account number associated with the customer
            - name: rowguid
              description: The unique identifier for the customer
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: personcreditcard
          description: >
            Information about the relationship between people and credit cards.
          columns:
            - name: businessentityid
              description: Foreign key referencing the business entity associated with the person
              tests:
              - not_null
            - name: creditcardid
              description: Foreign key referencing the credit card associated with the person
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salesorderdetail
          description: >
            Information about sales order details.
          columns:
            - name: salesorderid
              description: Foreign key referencing the sales order associated with the detail
              tests:
                - not_null
            - name: salesorderdetailid
              description: Primary key of the sales order detail table
              tests:
                - unique
                - not_null
            - name: carriertrackingnumber
              description: The tracking number of the carrier
            - name: orderqty
              description: The quantity of products in the sales order detail
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 1
                    inclusive: true
            - name: productid
              description: Foreign key referencing the product associated with the sales order detail
              tests:
                - not_null
            - name: specialofferid
              description: >
                Foreign key referencing the special offer associated with the sales order detail
              tests:
                - not_null
            - name: unitprice
              description: The unit price of the product in the sales order detail
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: false
            - name: unitpricediscount
              description: The discount applied to the unit price of the product
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: linetotal
              description: The total cost of the sales order detail line
            - name: rowguid
              description: The unique identifier for the sales order detail
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salesorderheader
          description: >
            Information about sales orders.
          columns:
            - name: salesorderid
              description: Primary key of the sales order header table
              tests:
                - unique
                - not_null
            - name: revisionnumber
              description: The revision number of the sales order
              tests:
                - not_null
            - name: orderdate
              description: The date the sales order was placed
              tests:
                - not_null
            - name: duedate
              description: The due date for the sales order
              tests:
                - not_null
            - name: shipdate
              description: The date the sales order was shipped
            - name: status
              description: The status of the sales order
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 1
                    max_value: 8
                    inclusive: true
            - name: onlineorderflag
              description: >
                Flag indicating whether the order was placed online
              tests:
                - not_null
            - name: salesordernumber
              description: The unique identifier for the sales order
            - name: purchaseordernumber
              description: >
                The purchase order number associated with the sales order
            - name: accountnumber
              description: >
                The account number associated with the sales order
            - name: customerid
              description: >
                Foreign key referencing the customer associated with the sales order
              tests:
                - not_null
            - name: salespersonid
              description: >
                Foreign key referencing the salesperson associated with the sales order
            - name: territoryid
              description: >
                Foreign key referencing the territory associated with the sales order
            - name: billtoaddressid
              description: >
                Foreign key referencing the billing address associated with the sales order
              tests:
                - not_null
            - name: shiptoaddressid
              description: >
                Foreign key referencing the shipping address associated with the sales order
              tests:
                - not_null
            - name: shipmethodid
              description: >
                Foreign key referencing the shipping method associated with the sales order
              tests:
                - not_null
            - name: creditcardid
              description: >
                Foreign key referencing the credit card associated with the sales order
            - name: creditcardapprovalcode
              description: >
                The approval code for the credit card used in the sales order
            - name: currencyrateid
              description: >
                Foreign key referencing the currency rate associated with the sales order
            - name: subtotal
              description: The subtotal cost of the sales order
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0.00
                    inclusive: true
            - name: taxamt
              description: The tax amount for the sales order
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0.00
                    inclusive: true
            - name: freight
              description: The freight cost for the sales order
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 0.00
                    inclusive: true
            - name: totaldue
              description: The total cost due for the sales order
            - name: comment
              description: Additional comments for the sales order
            - name: rowguid
              description: The unique identifier for the sales order
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salesorderheadersalesreason
          description: >
            Junction table linking sales orders to sales reasons.
          columns:
            - name: salesorderid
              description: >
                Foreign key referencing the sales order associated with the sales reason
              tests:
                - not_null
            - name: salesreasonid
              description: >
                Foreign key referencing the sales reason associated with the sales order
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salesperson
          description: >-
            Information about salespersons.  
          columns:    
            - name: businessentityid
              description: Primary key of the salesperson table
              tests:
                - unique
                - not_null
            - name: territoryid
              description: >
                Foreign key referencing the territory associated with the salesperson
            - name: salesquota
              description: The sales quota for the salesperson
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: false
            - name: bonus
              description: The bonus for the salesperson
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: commissionpct
              description: The commission percentage for the salesperson
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: salesytd
              description: The year-to-date sales for the salesperson
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: saleslastyear
              description: The sales for the salesperson in the last year
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: rowguid
              description: The unique identifier for the salesperson
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null

        
        - name: salespersonquotahistory
          description: >
            History of sales quotas for salespersons.
          columns:
            - name: businessentityid
              description: >
                Foreign key referencing the salesperson associated with the quota history
              tests:
                - not_null
            - name: quotadate
              description: The date of the sales quota
              tests:
                - not_null
            - name: salesquota
              description: The sales quota for the salesperson
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: rowguid
              description: The unique identifier for the salesperson quota history
              tests:
              - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salesreason
          description: >
            Information about sales reasons.
          columns:
            - name: salesreasonid
              description: Primary key of the sales reason table
              tests:
                - unique
                - not_null
            - name: name
              description: The name of the sales reason
              tests:
                - not_null
            - name: reasontype
              description: The type of the sales reason
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salestaxrate
          description: >
            Information about sales tax rates.
          columns:
            - name: salestaxrateid
              description: Primary key of the sales tax rate table
              tests:
                - unique
                - not_null
            - name: stateprovinceid
              description: >
                Foreign key referencing the state or province associated with the tax rate
              tests:
              - not_null
            - name: taxtype
              description: The type of the tax rate
              tests:
                - not_null
                - dbt_utils.accepted_range:
                    min_value: 1
                    max_value: 3
                    inclusive: true
            - name: taxrate
              description: The rate of the tax
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: name
              description: The name of the tax rate
              tests:
                - not_null
            - name: rowguid
              description: The unique identifier for the tax rate
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
              - not_null
        
        - name: salesterritory
          description: >
            Information about sales territories.
          columns:
            - name: territoryid
              description: Primary key of the sales territory table
              tests:
                - unique
                - not_null
            - name: name
              description: The name of the sales territory
              tests:
                - not_null
            - name: countryregioncode
              description: >
                The country or region code associated with the sales territory
              tests:
                - not_null
            - name: geographycgroup
              description: The group of the sales territory
              tests:
                - not_null
            - name: salesytd
              description: The year-to-date sales for the sales territory
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: saleslastyear
              description: The sales for the sales territory in the last year
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: costytd
              description: The year-to-date cost for the sales territory
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: costlastyear
              description: The cost for the sales territory in the last year
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: rowguid
              description: The unique identifier for the sales territory
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: salesterritoryhistory
          description: >
            Information about sales territory history.
          columns:
            - name: businessentityid
              description: >
                Foreign key referencing the business entity (sales person)
              tests:
                - not_null
            - name: territoryid
              description: Foreign key referencing the sales territory
              tests:
                - not_null
            - name: startdate
              description: The start date of the sales territory history
              tests:
                - not_null
            - name: enddate
              description: The end date of the sales territory history
              tests:
                - dbt_utils.expression_is_true:
                    expression: "enddate > startdate"
            - name: rowguid
              description: The unique identifier for the sales territory history
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: shoppingcartitem
          description: >
            Information about shopping cart items.
          columns:
            - name: shoppingcartitemid
              description: Primary key of the shopping cart item table
              tests:
                - unique
                - not_null
            - name: shoppingcartid
              description: The identifier of the shopping cart
              tests:
                - not_null
            - name: quantity
              description: The quantity of the product in the shopping cart
              tests:
                - dbt_utils.accepted_range:
                    min_value: 1
                    inclusive: true
            - name: productid
              description: Foreign key referencing the product
              tests:
                - not_null
            - name: datecreated
              description: The date and time the shopping cart item was created
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: specialoffer
          description: >
            Information about special offers.
          columns:
            - name: specialofferid
              description: Primary key of the special offer table
              tests:
                - unique
                - not_null
            - name: description
              description: The description of the special offer
              tests:
                - not_null
            - name: discountpct
              description: The discount percentage of the special offer
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: type
              description: The type of the special offer
              tests:
                - not_null
            - name: category
              description: The category of the special offer
              tests:
                - not_null
            - name: startdate
              description: The start date of the special offer
              tests:
                - not_null
            - name: enddate
              description: The end date of the special offer
              tests:
                - not_null
                - dbt_utils.expression_is_true: 
                    expression: "(enddate >= startdate) OR (enddate IS NULL)"
            - name: minqty
              description: The minimum quantity for the special offer
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: maxqty
              description: The maximum quantity for the special offer
              tests:
                - dbt_utils.accepted_range:
                    min_value: 0
                    inclusive: true
            - name: rowguid
              description: The unique identifier for the special offer
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: specialofferproduct
          description: >
            Information about products associated with special offers.
          columns:
            - name: specialofferid
              description: Foreign key referencing the special offer
              tests:
                - not_null
            - name: productid
              description: Foreign key referencing the product
              tests:
                - not_null
            - name: rowguid
              description: The unique identifier for the special offer product
              tests:
                - not_null
            - name: modifieddate
              description: The date and time the record was last modified
              tests:
                - not_null
        
        - name: store
          description: >
            Information about stores.
          columns:
            - name: businessentityid
              description: Primary key referencing the business entity
              tests:
                - unique
                - not_null
            - name: name
              description: The name of the store
              tests:
                - not_null
            - name: salespersonid
              description: Foreign key referencing the sales person
            - name: demographics
              description: Demographic information about the store
            - name: rowguid
              description: The unique identifier for the store
              tests:
                - not_null
            - name: modifieddate
              description: >
                The date and time the record was last modified
              tests:
                - not_null